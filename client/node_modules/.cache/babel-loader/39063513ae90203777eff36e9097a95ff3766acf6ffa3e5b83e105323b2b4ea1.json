{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ryana\\\\Desktop\\\\CPSC 362 PROJECT\\\\client\\\\src\\\\components\\\\SearchAndMap\\\\SearchMap.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Button from '@mui/material/Button';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport Slider from '@mui/material/Slider';\nimport './SearchMap.css';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst options = ['bar', 'bank', 'gym', 'restaurant', 'shopping_mall', 'liquor_store', 'cafe', 'church', 'dentist', 'pharmacy', 'night_club'];\nconst prices = [1, 2, 3, 4];\nconst getOptionLabel = option => {\n  // Convert snake_case to Title Case\n  return option.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');\n};\nconst getPriceLabel = price => {\n  switch (price) {\n    case 1:\n      return '$';\n    case 2:\n      return '$$';\n    case 3:\n      return '$$$';\n    case 4:\n      return '$$$$';\n    default:\n      return '';\n  }\n};\nfunction removePlaces(markers, map) {\n  const clearButton = document.getElementById(\"clear\");\n  const placesList = document.getElementById(\"places\");\n  clearButton.onclick = function () {\n    deleteMarkers();\n    placesList.innerHTML = '';\n  };\n}\nfunction setMapOnAll(map) {\n  for (let i = 0; i < markers.length; i++) {\n    markers[i].setMap(map);\n  }\n}\n\n// Removes the markers from the map, but keeps them in the array.\nfunction hideMarkers() {\n  setMapOnAll(null);\n}\nfunction deleteMarkers() {\n  hideMarkers();\n  markers = [];\n}\nconst [optionVal, setOptionVal] = useState(options[0]);\nconst [priceVal, setOptionPrice] = useState(prices[0]);\nconst [inputValue, setInputValue] = useState('');\nconst [inputPrice, setInputPrice] = useState('');\nconst [nRadius, setRadius] = useState(9600); // Default radius in meters\nconst [clickedLatLng, setClickedLatLng] = useState({\n  lat: 33.88134,\n  lng: -117.8818\n});\nconst mapRef = useRef(null);\nconst circleRef = useRef(null);\nconst SearchAndMap = () => {\n  _s();\n  useEffect(() => {\n    const loadGoogleMapsScript = () => {\n      const script = document.createElement('script');\n\n      // script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyCUnmqTkhklqvM0P2AjfHMVyx7bxBmMwio&libraries=places&callback=initMap`;\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}&libraries=places&callback=initMap`;\n      script.async = true;\n      script.defer = true;\n      script.onload = () => {\n        initMap();\n      };\n      document.head.appendChild(script);\n    };\n    const initMap = () => {\n      if (window.google && window.google.maps && window.google.maps.Map) {\n        const fullerton = {\n          lat: 33.8831307524001,\n          lng: -117.88541077620087\n        };\n        const map = new window.google.maps.Map(document.getElementById('map'), {\n          zoom: 11,\n          center: fullerton\n        });\n        mapRef.current = map;\n        const initCircle = new window.google.maps.Circle({\n          strokeColor: \"#083D77\",\n          strokeOpacity: 0.8,\n          strokeWeight: 2,\n          fillColor: \"#083D77\",\n          fillOpacity: 0.15,\n          map,\n          center: fullerton,\n          radius: nRadius\n        });\n        circleRef.current = initCircle;\n        let infoWindow = new window.google.maps.InfoWindow({\n          content: \"Fullerton\",\n          position: fullerton\n        });\n        infoWindow.open(map);\n        setClickedLatLng(fullerton);\n        function initializeAutocomplete() {\n          var input = document.getElementById('searchTextField');\n          var autocomplete = new window.google.maps.places.Autocomplete(input);\n\n          // Listen for the 'place_changed' event\n          autocomplete.addListener('place_changed', function () {\n            infoWindow.close();\n            var place = autocomplete.getPlace();\n            console.log(\"Autocomplete result: \", place); // Log the details of the selected place\n\n            // Log place.geometry.location for debugging\n            console.log(\"Geometry location: \", place.geometry.location);\n            if (place.geometry && place.geometry.location instanceof window.google.maps.LatLng) {\n              const autoLatLng = {\n                lat: place.geometry.location.lat(),\n                lng: place.geometry.location.lng()\n              };\n              console.log(\"autoComplete lat/lng: \", autoLatLng);\n              map.panTo(place.geometry.location);\n\n              // Set the clicked LatLng\n              setClickedLatLng(autoLatLng);\n\n              // Set the content of the info window\n              const currLatLng = JSON.stringify(autoLatLng, null, 2);\n              infoWindow = new window.google.maps.InfoWindow({\n                position: currLatLng,\n                center: currLatLng\n              });\n              infoWindow.setContent(currLatLng);\n              initCircle.setCenter(autoLatLng);\n              infoWindow.open(map);\n            } else {\n              console.log(\"No geometry or location found for the selected place, or location is not an instance of google.maps.LatLng.\");\n            }\n          });\n\n          // Add event listener for 'keypress' event to trigger search on 'Enter' key press\n          input.addEventListener('keypress', function (event) {\n            if (event.key === 'Enter') {\n              // Trigger search only if the input field is not empty\n              if (input.value.trim() !== '') {\n                // Simulate a click on the first prediction in the Autocomplete dropdown\n                var firstPrediction = document.querySelector('.pac-container .pac-item');\n                if (firstPrediction) {\n                  firstPrediction.click();\n                }\n              }\n            }\n          });\n        }\n        initializeAutocomplete();\n        map.addListener('click', clickEvent => {\n          infoWindow.close();\n          const lat = clickEvent.latLng.lat();\n          const lng = clickEvent.latLng.lng();\n          const clickedLatLng = {\n            lat,\n            lng\n          };\n          infoWindow = new window.google.maps.InfoWindow({\n            position: clickedLatLng,\n            center: clickedLatLng\n          });\n          console.log(clickEvent);\n          map.panTo(clickEvent.latLng);\n          setClickedLatLng(clickedLatLng);\n          const currLatLng = JSON.stringify(clickEvent.latLng.toJSON(), null, 2);\n          infoWindow.setContent(currLatLng);\n          initCircle.setCenter(clickEvent.latLng);\n          infoWindow.open(map);\n        });\n      } else {\n        console.error('Error: google.maps.Map not defined');\n      }\n    };\n    if (!window.google || !window.google.maps || !window.google.maps.Map) {\n      loadGoogleMapsScript();\n    } else {\n      initMap();\n    }\n  }, []);\n  const handleRadiusChange = (event, value) => {\n    setRadius(value);\n    circleRef.current.setRadius(value);\n  };\n  let markers = [];\n\n  // async function handleSearch(lat, lng, radius, term, price) {\n  //     try {\n  //         const response = await axios.get('https://api.yelp.com/v3/businesses/search', {\n  //             headers: {\n  //                 Authorization: 'Bearer QRy3peTwKHhnlMYWXQNdvfhdDXDAWmQ68YnIH2MewwmMte30eelvDw34s2OR03QCZQ5HuPS0QdtEjHcZAazrR5DFePKeaG3hvaOakvnR9waOP0jgQgEoQ3B8WCi4ZXYx'\n  //             },\n  //             params: {\n  //                 term : 'food',\n  //                 location : 'newyork',\n  //                 limit : 20\n  //             }\n  //         });\n  //         console.log(response.data)\n  //         return response.data;\n  //     } catch (error) {\n  //         console.error('Error: ', error);\n  //         return null;\n  //     }\n  // }\n\n  // handleSearch(clickedLatLng.lat, clickedLatLng.lng, nRadius, optionVal, priceVal)\n  //     .then(yelpBusinesses => {\n  //         console.log(yelpBusinesses);\n  //     });\n\n  const handleSearch = async () => {\n    // Clear the existing search results and markers\n    const placesList = document.getElementById(\"places\");\n    placesList.innerHTML = '';\n    console.log(\"Searching for:\", optionVal, \"near lat:\", clickedLatLng.lat, \"lng:\", clickedLatLng.lng, \"within a\", nRadius, \"m radius.\");\n    console.log(\"Price: \", priceVal);\n    const service = new window.google.maps.places.PlacesService(mapRef.current);\n    let getNextPage;\n    const moreButton = document.getElementById(\"more\");\n    moreButton.onclick = function () {\n      moreButton.disabled = true;\n      if (getNextPage) {\n        getNextPage();\n      }\n    };\n    service.nearbySearch({\n      location: clickedLatLng,\n      radius: nRadius,\n      type: optionVal,\n      maxprice: priceVal\n    }, (results, status, pagination) => {\n      if (status !== \"OK\" || !results) return;\n      console.log(\"search results\");\n      // console.log(results)\n      results.forEach(place => {\n        const name = place.name;\n        const latitude = place.geometry.location.lat();\n        const longitude = place.geometry.location.lng();\n        const photos = place.photos;\n        console.log(\"photos : \", photos);\n\n        // console.log(\"establishment name:\", name, \"{\", latitude, \",\", longitude,\"}\");\n      });\n\n      // Alphabetize the results by name\n      const sortedResults = results.sort((a, b) => {\n        return a.name.localeCompare(b.name);\n      });\n\n      // const filteredResults = sortedResults.filter(place => {\n      //     // Check if the first type matches optionVal\n      //     return place.types[0] === optionVal;\n      // });\n\n      addPlaces(sortedResults, mapRef.current);\n      removePlaces(sortedResults, mapRef.current);\n      moreButton.disabled = !pagination || !pagination.hasNextPage;\n      if (pagination && pagination.hasNextPage) {\n        getNextPage = () => {\n          // Note: nextPage will call the same handler function as the initial call\n          pagination.nextPage();\n        };\n      }\n    });\n    markers = [];\n    function addPlaces(places, map) {\n      for (const place of places) {\n        // if (place.geometry && place.geometry.location instanceof window.google.maps.LatLng) {\n        const image = {\n          url: place.icon,\n          size: new window.google.maps.Size(71, 71),\n          origin: new window.google.maps.Point(0, 0),\n          anchor: new window.google.maps.Point(17, 34),\n          scaledSize: new window.google.maps.Size(25, 25)\n        };\n        const markerLatLng = {\n          lat: place.geometry.location.lat(),\n          lng: place.geometry.location.lng()\n        };\n\n        // console.log(\"searchMarker latLng: \",markerLatLng)\n\n        const marker = new window.google.maps.Marker({\n          map,\n          icon: image,\n          title: place.name,\n          position: markerLatLng\n        });\n        markers.push(marker); // Store the marker in the array\n\n        const li = document.createElement(\"li\");\n        li.textContent = place.name;\n        placesList.appendChild(li);\n        li.addEventListener(\"click\", () => {\n          map.panTo(place.geometry.location);\n          window.google.maps.event.addListenerOnce(map, 'idle', () => {\n            map.setZoom(13);\n          });\n        });\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"parent-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"autocomplete-container\",\n      children: [/*#__PURE__*/_jsxDEV(Autocomplete, {\n        className: \"autoDropdown\",\n        value: optionVal,\n        onChange: (event, newValue) => {\n          setOptionVal(newValue);\n        },\n        inputValue: inputValue,\n        onInputChange: (event, newInputValue) => {\n          setInputValue(newInputValue);\n        },\n        id: \"clear-on-escape\",\n        options: options,\n        getOptionLabel: option => getOptionLabel(option),\n        clearOnEscape: true,\n        renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n          className: \"inputAutocomplete\",\n          ...params,\n          label: \"search for ... \",\n          variant: \"standard\",\n          InputProps: {\n            ...params.InputProps,\n            disableUnderline: true,\n            autoFocus: true\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" near \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"searchTextField\",\n        type: \"text\",\n        size: \"50\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"searchButton\",\n        variant: \"contained\",\n        onClick: handleSearch,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-container\",\n      children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n        className: \"autoDropdown paramButton\",\n        value: priceVal,\n        onChange: (event, newPrice) => {\n          setOptionPrice(newPrice);\n        },\n        inputValue: inputPrice,\n        onInputChange: (event, newInputPrice) => {\n          setInputPrice(newInputPrice);\n        },\n        id: \"controllable-states-demo-prices\",\n        options: prices,\n        getOptionLabel: option => getPriceLabel(option),\n        renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n          ...params,\n          label: \"Pricing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 46\n        }, this),\n        sx: {\n          width: '8vw',\n          height: '5vh'\n        },\n        autoComplete: true // Enable autocomplete\n        ,\n        autoHighlight: true // Highlight first option by default\n        ,\n        clearOnEscape: true // Clear input on pressing escape key\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"slider-container\",\n      children: /*#__PURE__*/_jsxDEV(Slider, {\n        min: 1600 // minimum radius value in meters\n        ,\n        max: 40000 // maximum radius value in meters\n        ,\n        step: 1600 // step size for the slider\n        ,\n        onChange: handleRadiusChange,\n        value: nRadius // Slider value in meters\n        ,\n        valueLabelDisplay: \"on\",\n        valueLabelFormat: value => `${value / 1600} ${value === 1600 ? 'mile' : 'miles'}`,\n        \"aria-labelledby\": \"radius-slider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-side-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          id: \"places\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"more\",\n          children: \"Load more results\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"clear\",\n          children: \" Clear Results \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 380,\n    columnNumber: 9\n  }, this);\n};\n_s(SearchAndMap, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = SearchAndMap;\nexport default SearchAndMap;\n\n/*\r\n\r\n        // function initializeAutocomplete() {\r\n        //     var input = document.getElementById('searchTextField');\r\n        //     var autocomplete = new window.google.maps.places.Autocomplete(input);\r\n\r\n        //     // Listen for the 'place_changed' event\r\n        //     autocomplete.addListener('place_changed', function() {\r\n        //         infoWindow.close()\r\n        //         var place = autocomplete.getPlace();\r\n        //         console.log(\"Autocomplete result: \", place); // Log the details of the selected place\r\n            \r\n        //         // Log place.geometry.location for debugging\r\n        //         console.log(\"Geometry location: \", place.geometry.location);\r\n            \r\n        //         if (place.geometry && place.geometry.location instanceof window.google.maps.LatLng) {\r\n        //             const autoLatLng = {\r\n        //                 lat: place.geometry.location.lat(),\r\n        //                 lng: place.geometry.location.lng()\r\n        //             };\r\n        //             console.log(\"autoComplete lat/lng: \", autoLatLng);\r\n        //             map.panTo(place.geometry.location);\r\n\r\n\r\n\r\n*/\nvar _c;\n$RefreshReg$(_c, \"SearchAndMap\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Button","Autocomplete","TextField","Slider","axios","jsxDEV","_jsxDEV","options","prices","getOptionLabel","option","split","map","word","charAt","toUpperCase","slice","join","getPriceLabel","price","removePlaces","markers","clearButton","document","getElementById","placesList","onclick","deleteMarkers","innerHTML","setMapOnAll","i","length","setMap","hideMarkers","optionVal","setOptionVal","priceVal","setOptionPrice","inputValue","setInputValue","inputPrice","setInputPrice","nRadius","setRadius","clickedLatLng","setClickedLatLng","lat","lng","mapRef","circleRef","SearchAndMap","_s","loadGoogleMapsScript","script","createElement","src","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","async","defer","onload","initMap","head","appendChild","window","google","maps","Map","fullerton","zoom","center","current","initCircle","Circle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","radius","infoWindow","InfoWindow","content","position","open","initializeAutocomplete","input","autocomplete","places","addListener","close","place","getPlace","console","log","geometry","location","LatLng","autoLatLng","panTo","currLatLng","JSON","stringify","setContent","setCenter","addEventListener","event","key","value","trim","firstPrediction","querySelector","click","clickEvent","latLng","toJSON","error","handleRadiusChange","handleSearch","service","PlacesService","getNextPage","moreButton","disabled","nearbySearch","type","maxprice","results","status","pagination","forEach","name","latitude","longitude","photos","sortedResults","sort","a","b","localeCompare","addPlaces","hasNextPage","nextPage","image","url","icon","size","Size","origin","Point","anchor","scaledSize","markerLatLng","marker","Marker","title","push","li","textContent","addListenerOnce","setZoom","className","children","id","onChange","newValue","onInputChange","newInputValue","clearOnEscape","renderInput","params","label","variant","InputProps","disableUnderline","autoFocus","fileName","_jsxFileName","lineNumber","columnNumber","onClick","newPrice","newInputPrice","sx","width","height","autoComplete","autoHighlight","min","max","step","valueLabelDisplay","valueLabelFormat","_c","$RefreshReg$"],"sources":["C:/Users/ryana/Desktop/CPSC 362 PROJECT/client/src/components/SearchAndMap/SearchMap.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Autocomplete from '@mui/material/Autocomplete';\r\nimport TextField from '@mui/material/TextField';\r\nimport Slider from '@mui/material/Slider';\r\nimport './SearchMap.css';\r\n\r\nimport axios from 'axios';\r\n\r\nconst options = [\r\n    'bar', \r\n    'bank', \r\n    'gym', \r\n    'restaurant', \r\n    'shopping_mall', \r\n    'liquor_store', \r\n    'cafe', \r\n    'church',\r\n    'dentist',\r\n    'pharmacy',\r\n    'night_club'\r\n];\r\n\r\nconst prices = [\r\n    1,\r\n    2,\r\n    3,\r\n    4,\r\n]   \r\n\r\nconst getOptionLabel = (option) => {\r\n    // Convert snake_case to Title Case\r\n    return option.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');\r\n}\r\n\r\nconst getPriceLabel = (price) => {\r\n    switch (price) {\r\n        case 1:\r\n            return '$';\r\n        case 2:\r\n            return '$$';\r\n        case 3:\r\n            return '$$$';\r\n        case 4:\r\n            return '$$$$';\r\n        default:\r\n            return '';\r\n    }\r\n};\r\n\r\nfunction removePlaces(markers,map) {\r\n    const clearButton = document.getElementById(\"clear\");\r\n    const placesList = document.getElementById(\"places\");\r\n    clearButton.onclick = function() {\r\n        deleteMarkers();\r\n        placesList.innerHTML = '';\r\n    }\r\n\r\n}\r\n\r\nfunction setMapOnAll(map) {\r\n    for (let i = 0; i < markers.length; i++) {\r\n        markers[i].setMap(map);\r\n    }\r\n}\r\n  \r\n// Removes the markers from the map, but keeps them in the array.\r\nfunction hideMarkers() {\r\n    setMapOnAll(null);\r\n}\r\n\r\nfunction deleteMarkers() {\r\n    hideMarkers();\r\n    markers = [];\r\n}\r\n\r\nconst [optionVal, setOptionVal] = useState(options[0]);\r\nconst [priceVal, setOptionPrice] = useState(prices[0]);\r\n\r\nconst [inputValue, setInputValue] = useState('');\r\nconst [inputPrice, setInputPrice] = useState('');\r\n  \r\nconst [nRadius, setRadius] = useState(9600); // Default radius in meters\r\nconst [clickedLatLng, setClickedLatLng] = useState({ lat: 33.88134, lng: -117.8818 });\r\nconst mapRef = useRef(null);\r\nconst circleRef = useRef(null);\r\n\r\n\r\nconst SearchAndMap = () => {\r\n    useEffect(() => {\r\n        const loadGoogleMapsScript = () => {\r\n            const script = document.createElement('script');\r\n\r\n            // script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyCUnmqTkhklqvM0P2AjfHMVyx7bxBmMwio&libraries=places&callback=initMap`;\r\n            script.src = `https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}&libraries=places&callback=initMap`;\r\n\r\n            script.async = true;\r\n            script.defer = true;\r\n\r\n            script.onload = () => {\r\n                initMap();\r\n            };\r\n\r\n            document.head.appendChild(script);\r\n        };\r\n\r\n        const initMap = () => {\r\n            if (window.google && window.google.maps && window.google.maps.Map) {\r\n                const fullerton = { lat: 33.8831307524001, lng: -117.88541077620087 };\r\n                const map = new window.google.maps.Map(document.getElementById('map'), {\r\n                    zoom: 11,\r\n                    center: fullerton,\r\n                });\r\n\r\n                mapRef.current = map;\r\n\r\n                const initCircle = new window.google.maps.Circle({\r\n                    strokeColor: \"#083D77\",\r\n                    strokeOpacity: 0.8,\r\n                    strokeWeight: 2,\r\n                    fillColor: \"#083D77\",\r\n                    fillOpacity: 0.15,\r\n                    map,\r\n                    center: fullerton,\r\n                    radius: nRadius, \r\n                });\r\n\r\n                circleRef.current = initCircle;\r\n\r\n                let infoWindow = new window.google.maps.InfoWindow({\r\n                    content: \"Fullerton\",\r\n                    position: fullerton,\r\n                });\r\n\r\n                infoWindow.open(map);\r\n\r\n                setClickedLatLng(fullerton);\r\n\r\n                function initializeAutocomplete() {\r\n                    var input = document.getElementById('searchTextField');\r\n                    var autocomplete = new window.google.maps.places.Autocomplete(input);\r\n        \r\n                    // Listen for the 'place_changed' event\r\n                    autocomplete.addListener('place_changed', function() {\r\n                        infoWindow.close()\r\n                        var place = autocomplete.getPlace();\r\n                        console.log(\"Autocomplete result: \", place); // Log the details of the selected place\r\n                    \r\n                        // Log place.geometry.location for debugging\r\n                        console.log(\"Geometry location: \", place.geometry.location);\r\n                    \r\n                        if (place.geometry && place.geometry.location instanceof window.google.maps.LatLng) {\r\n                            const autoLatLng = {\r\n                                lat: place.geometry.location.lat(),\r\n                                lng: place.geometry.location.lng()\r\n                            };\r\n                            console.log(\"autoComplete lat/lng: \", autoLatLng);\r\n                            map.panTo(place.geometry.location);\r\n\r\n                            // Set the clicked LatLng\r\n                            setClickedLatLng(autoLatLng);\r\n\r\n                            // Set the content of the info window\r\n                            const currLatLng = JSON.stringify(autoLatLng, null, 2);\r\n\r\n                            infoWindow = new window.google.maps.InfoWindow({\r\n                                position: currLatLng,\r\n                                center: currLatLng,\r\n                            });\r\n\r\n                            infoWindow.setContent(currLatLng);\r\n                            \r\n                            initCircle.setCenter(autoLatLng);\r\n\r\n                            infoWindow.open(map);\r\n                        } else {\r\n                            console.log(\"No geometry or location found for the selected place, or location is not an instance of google.maps.LatLng.\");\r\n                        }\r\n                    });\r\n        \r\n                    // Add event listener for 'keypress' event to trigger search on 'Enter' key press\r\n                    input.addEventListener('keypress', function(event) {\r\n                        if (event.key === 'Enter') {\r\n                            // Trigger search only if the input field is not empty\r\n                            if (input.value.trim() !== '') {\r\n                                // Simulate a click on the first prediction in the Autocomplete dropdown\r\n                                var firstPrediction = document.querySelector('.pac-container .pac-item');\r\n                                if (firstPrediction) {\r\n                                    firstPrediction.click();\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n                initializeAutocomplete();\r\n\r\n                map.addListener('click', (clickEvent) => {\r\n                    infoWindow.close();\r\n\r\n                    const lat = clickEvent.latLng.lat();\r\n                    const lng = clickEvent.latLng.lng();\r\n                    const clickedLatLng = { lat, lng };\r\n\r\n                    infoWindow = new window.google.maps.InfoWindow({\r\n                        position: clickedLatLng,\r\n                        center: clickedLatLng,\r\n                    });\r\n\r\n                    console.log(clickEvent)\r\n                    map.panTo(clickEvent.latLng);\r\n                    setClickedLatLng(clickedLatLng);\r\n\r\n                    const currLatLng = JSON.stringify(clickEvent.latLng.toJSON(), null, 2);\r\n                    infoWindow.setContent(currLatLng);\r\n\r\n                    initCircle.setCenter(clickEvent.latLng);\r\n\r\n                    infoWindow.open(map);\r\n                });\r\n            } else {\r\n                console.error('Error: google.maps.Map not defined');\r\n            }\r\n        };\r\n\r\n        if (!window.google || !window.google.maps || !window.google.maps.Map) {\r\n            loadGoogleMapsScript();\r\n        } else {\r\n            initMap();\r\n        }\r\n\r\n    }, []); \r\n\r\n    const handleRadiusChange = (event, value) => {\r\n        setRadius(value); \r\n        circleRef.current.setRadius(value); \r\n    };\r\n\r\n    let markers = [];    \r\n\r\n    // async function handleSearch(lat, lng, radius, term, price) {\r\n    //     try {\r\n    //         const response = await axios.get('https://api.yelp.com/v3/businesses/search', {\r\n    //             headers: {\r\n    //                 Authorization: 'Bearer QRy3peTwKHhnlMYWXQNdvfhdDXDAWmQ68YnIH2MewwmMte30eelvDw34s2OR03QCZQ5HuPS0QdtEjHcZAazrR5DFePKeaG3hvaOakvnR9waOP0jgQgEoQ3B8WCi4ZXYx'\r\n    //             },\r\n    //             params: {\r\n    //                 term : 'food',\r\n    //                 location : 'newyork',\r\n    //                 limit : 20\r\n    //             }\r\n    //         });\r\n    //         console.log(response.data)\r\n    //         return response.data;\r\n    //     } catch (error) {\r\n    //         console.error('Error: ', error);\r\n    //         return null;\r\n    //     }\r\n    // }\r\n\r\n    \r\n    \r\n    // handleSearch(clickedLatLng.lat, clickedLatLng.lng, nRadius, optionVal, priceVal)\r\n    //     .then(yelpBusinesses => {\r\n    //         console.log(yelpBusinesses);\r\n    //     });\r\n    \r\n        \r\n    \r\n\r\n    const handleSearch = async () => {\r\n        // Clear the existing search results and markers\r\n        const placesList = document.getElementById(\"places\");\r\n        placesList.innerHTML = '';\r\n    \r\n        console.log(\"Searching for:\", optionVal, \"near lat:\", clickedLatLng.lat, \"lng:\", clickedLatLng.lng, \"within a\", nRadius, \"m radius.\" );\r\n        console.log(\"Price: \", priceVal);\r\n        const service = new window.google.maps.places.PlacesService(mapRef.current);\r\n        let getNextPage;\r\n        const moreButton = document.getElementById(\"more\");\r\n    \r\n        moreButton.onclick = function () {\r\n            moreButton.disabled = true;\r\n            if (getNextPage) {\r\n                getNextPage();\r\n            }\r\n        };\r\n    \r\n        service.nearbySearch(\r\n            {   location: clickedLatLng, \r\n                radius: nRadius, \r\n                type: optionVal, \r\n                maxprice: priceVal,\r\n            },\r\n            (results, status, pagination) => {\r\n                if (status !== \"OK\" || !results) return;\r\n                console.log(\"search results\")\r\n                // console.log(results)\r\n                results.forEach(place => {  \r\n                    const name = place.name;\r\n                    const latitude = place.geometry.location.lat();\r\n                    const longitude = place.geometry.location.lng();\r\n                    const photos = place.photos\r\n                    console.log(\"photos : \", photos)\r\n\r\n                \r\n                    // console.log(\"establishment name:\", name, \"{\", latitude, \",\", longitude,\"}\");\r\n                });\r\n\r\n                // Alphabetize the results by name\r\n                const sortedResults = results.sort((a, b) => {\r\n                    return a.name.localeCompare(b.name);\r\n                });\r\n\r\n                // const filteredResults = sortedResults.filter(place => {\r\n                //     // Check if the first type matches optionVal\r\n                //     return place.types[0] === optionVal;\r\n                // });\r\n\r\n                addPlaces(sortedResults, mapRef.current);\r\n                removePlaces(sortedResults, mapRef.current)\r\n                moreButton.disabled = !pagination || !pagination.hasNextPage;\r\n                if (pagination && pagination.hasNextPage) {\r\n                    getNextPage = () => {\r\n                        // Note: nextPage will call the same handler function as the initial call\r\n                        pagination.nextPage();\r\n                    };\r\n                }\r\n            }\r\n        );\r\n\r\n        markers = []\r\n\r\n        function addPlaces(places, map) {\r\n            for (const place of places) {\r\n                // if (place.geometry && place.geometry.location instanceof window.google.maps.LatLng) {\r\n                const image = {\r\n                    url: place.icon,\r\n                    size: new window.google.maps.Size(71, 71),\r\n                    origin: new window.google.maps.Point(0, 0),\r\n                    anchor: new window.google.maps.Point(17, 34),\r\n                    scaledSize: new window.google.maps.Size(25, 25),\r\n                };\r\n\r\n                const markerLatLng = {\r\n                    lat: place.geometry.location.lat(),\r\n                    lng: place.geometry.location.lng()\r\n                }\r\n\r\n                // console.log(\"searchMarker latLng: \",markerLatLng)\r\n\r\n                const marker = new window.google.maps.Marker({\r\n                    map,\r\n                    icon: image,\r\n                    title: place.name,\r\n                    position: markerLatLng,\r\n                });\r\n\r\n                markers.push(marker); // Store the marker in the array\r\n\r\n                const li = document.createElement(\"li\");\r\n\r\n                li.textContent = place.name;\r\n                placesList.appendChild(li);\r\n                li.addEventListener(\"click\", () => {\r\n                    map.panTo(place.geometry.location);\r\n                    window.google.maps.event.addListenerOnce(map, 'idle', () => {\r\n                        map.setZoom(13);\r\n                    });\r\n                });\r\n            }\r\n        }\r\n            \r\n    \r\n    };\r\n\r\n    \r\n\r\n    return (\r\n        <div className='parent-container'>\r\n            <div id=\"autocomplete-container\">\r\n                <Autocomplete className='autoDropdown'\r\n                    value={optionVal}\r\n                    onChange={(event, newValue) => {\r\n                        setOptionVal(newValue);\r\n                    }}\r\n                    inputValue={inputValue}\r\n                    onInputChange={(event, newInputValue) => {\r\n                        setInputValue(newInputValue);\r\n                    }}\r\n                    id=\"clear-on-escape\"\r\n                    options={options}\r\n                    getOptionLabel={(option) => getOptionLabel(option)}\r\n                    clearOnEscape\r\n                    renderInput={(params) => (\r\n                        <TextField className='inputAutocomplete' \r\n                            {...params} \r\n                            label=\"search for ... \" \r\n                            variant=\"standard\" \r\n                            InputProps={{ ...params.InputProps, disableUnderline: true, autoFocus: true }} \r\n                        />\r\n                    )}\r\n                />\r\n                <p> near </p>\r\n                <input id=\"searchTextField\" type=\"text\" size=\"50\"/>\r\n                <Button className=\"searchButton\" variant=\"contained\" onClick={handleSearch}>Search</Button>\r\n            </div>\r\n            <div className='search-container'>\r\n                <Autocomplete className='autoDropdown paramButton'\r\n                    value={priceVal}\r\n                    onChange={(event, newPrice) => {\r\n                        setOptionPrice(newPrice);\r\n                    }}\r\n                    inputValue={inputPrice}\r\n                    onInputChange={(event, newInputPrice)=>{\r\n                        setInputPrice(newInputPrice)\r\n                    }}\r\n                    id=\"controllable-states-demo-prices\"\r\n                    options={prices}\r\n                    getOptionLabel={(option) => getPriceLabel(option)}\r\n                    renderInput={(params) => <TextField {...params} label=\"Pricing\" />}\r\n                    sx={{ width: '8vw', height: '5vh' }}\r\n                    autoComplete={true} // Enable autocomplete\r\n                    autoHighlight={true} // Highlight first option by default\r\n                    clearOnEscape={true} // Clear input on pressing escape key\r\n                />\r\n            </div>\r\n            <div className='slider-container'>\r\n                <Slider\r\n                    min={1600}    // minimum radius value in meters\r\n                    max={40000}   // maximum radius value in meters\r\n                    step={1600}   // step size for the slider\r\n                    onChange={handleRadiusChange}\r\n                    value={nRadius} // Slider value in meters\r\n                    valueLabelDisplay=\"on\"\r\n                    valueLabelFormat={(value) => `${value / 1600} ${value === 1600 ? 'mile' : 'miles'}`}\r\n                    aria-labelledby=\"radius-slider\"\r\n                />\r\n            </div>\r\n            <div className='map-side-container'>\r\n                <div id=\"map\"></div>\r\n                <div id=\"sidebar\">\r\n                    <h2>Results</h2>\r\n                    <ul id=\"places\"></ul>\r\n                    <button id=\"more\">Load more results</button>\r\n                    <button id=\"clear\"> Clear Results </button>\r\n                </div>\r\n            </div>\r\n            {/* <div className=\"clicked-coordinates\">\r\n                {clickedLatLng && (\r\n                    <div className='coordinate-text'>\r\n                        <p>Clicked Coordinates:</p>\r\n                        {console.log(clickedLatLng)}\r\n                        <p>Latitude: {clickedLatLng.lat}</p>\r\n                        <p>Longitude: {clickedLatLng.lng}</p>\r\n                    </div>\r\n                )}\r\n            </div> */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchAndMap;\r\n\r\n\r\n/*\r\n\r\n        // function initializeAutocomplete() {\r\n        //     var input = document.getElementById('searchTextField');\r\n        //     var autocomplete = new window.google.maps.places.Autocomplete(input);\r\n\r\n        //     // Listen for the 'place_changed' event\r\n        //     autocomplete.addListener('place_changed', function() {\r\n        //         infoWindow.close()\r\n        //         var place = autocomplete.getPlace();\r\n        //         console.log(\"Autocomplete result: \", place); // Log the details of the selected place\r\n            \r\n        //         // Log place.geometry.location for debugging\r\n        //         console.log(\"Geometry location: \", place.geometry.location);\r\n            \r\n        //         if (place.geometry && place.geometry.location instanceof window.google.maps.LatLng) {\r\n        //             const autoLatLng = {\r\n        //                 lat: place.geometry.location.lat(),\r\n        //                 lng: place.geometry.location.lng()\r\n        //             };\r\n        //             console.log(\"autoComplete lat/lng: \", autoLatLng);\r\n        //             map.panTo(place.geometry.location);\r\n\r\n\r\n\r\n*/"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}